20260127 - Fixed oversized logo in sidebar by updating Tailwind config to scan shared UI package source files. Updated Dockerfiles to copy UI package into build context.
20260127 - Fixed login loop bug (withCredentials missing in identity frontend). Added passwordless login with email code for @expertly.com/@webintensive.com domains, password change, forgot password, and password strength validation. Visually verified all flows.
20260127 - Added DEPLOY_COLOR variable to all Traefik labels for blue/green deployment isolation. This ensures unique router names (e.g., ui-blue, ui-green) to prevent routing conflicts when both colors are running during deployment transitions.
20260127 - Removed stale /opt/traefik/dynamic/apps.yaml file that was routing vibetest to old qa container name.
20260127 - Added Gmail SMTP support for identity email sending. Added aiosmtplib, SMTP config settings, and environment variables in docker-compose.prod.yml. Falls back to logging if SMTP not configured.
20260127 - Switched from SMTP to Resend API for email (DO blocks SMTP ports). Pending domain verification for expertly.com - emails will work once DNS records propagate.
20260127 - Identity: Split Users & Bots into separate sidebar items, added user display and org switcher. Manage: Added View As User/Team switcher, moved Active Tasks above Queues, added queue filter tabs and table columns.
20260127 - Implement Playbooks Expansion: Added PlaybookStep model with AssigneeType enum, updated Playbook/PlaybookCreate/PlaybookUpdate to include steps, added circular reference validation in API, created full-page step editor UI with collapsible cards, reordering, markdown preview, assignee/approver options, and queue overrides.
20260127 - Fixed Manage Playbooks not working: VITE_API_URL had trailing /api causing double /api/api/v1 path. Changed to use nginx proxy (empty VITE_API_URL) for same-origin requests. Also fixed Identity default user to have is_default=true and role=owner.
20260127 - Fixed container crash issue caused by competing Docker Compose project names. Removed duplicate expertly-develop-* containers that conflicted with the blue-green deployment (expertly-green-* containers). Updated CLAUDE.md with correct manual docker commands that use COMPOSE_PROJECT_NAME.
20260128 Unified sidebar user display across all 9 Expertly subprojects by creating a shared useCurrentUser hook in packages/ui and updating all apps to use it consistently. Fixed issues where Manage wasn't showing user, Salon showed salon name instead of user name, and Today showed hardcoded 'Claude'.
20260128 - Added instance tracking fields (instance_count, last_instance_created_at) to Playbook model for tracking playbook instantiation. Fields added to backend model, API serialization, and frontend types. Not displayed in list view as requested.
20260128 - Added Wins page to Expertly Manage for celebrating completed tasks. Shows accomplishments for today/week/month with grouping by person or queue. Includes Trophy icon in sidebar navigation.
20260129 - Fixed Expertly Manage sidebar alphabetization (Projects/Playbooks swap) and added 'id' field to project serialization. PR #71 merged.
20260129 - Added Project Detail page to Expertly Manage with tabbed interface (Tasks/Completed/Recurring). Added project_id field to RecurringTask model/API. Created enhanced task creation modal with playbook typeahead, flexible assignment options (queue/team/user), and make-recurring toggle. Made project names clickable links.
20260129 - Implemented UserMenu restructuring + Backlog feature. Updated UserMenu to support expandable submenu type, removed chevron from simple links. Created Developer Tools submenu with Error Logs, Change Log, Backlog, Idea Backlog. Created BacklogItem backend model with CRUD API. Created Backlog and IdeaBacklog pages in Manage frontend with filters and modals.
20260129 - Fixed nginx caching causing stale HTML after deployments. Root cause: nginx `expires -1` directive adds `Cache-Control: no-cache` AND we added another header, resulting in duplicate headers that confused browsers. Fix: Removed `expires -1` and use explicit headers only. Also added proper no-cache headers to apps that were missing them (identity, salon, develop).
20250129 - Fix: Expertly Define artifact upload 'Product not found' error caused by blue-green deployment using separate SQLite databases
20250129 - Fix: Added ANTHROPIC_API_KEY to server .env for Expertly Define AI import feature
20250129 - Fix: Changed AI model from invalid 'claude-sonnet-4-20250514' to 'claude-3-5-sonnet-latest'
20260129 - Fixed Connections page to always show Add Connection button with all providers (Google, Slack). Unconfigured providers now show setup instructions instead of being hidden. Added Slack OAuth support.
20260130 - Expertly Define products not showing - Database data loss (3rd time)
- Root cause: Migration commit (9a728ba) converted Define from SQLite to PostgreSQL
- SQLite data in container volume was not migrated to managed PostgreSQL
- Product restored from shared_define_data volume
- 1 product recovered: Expertly Reply (4131c1b9-3d2b-42f0-841f-0701ebb76e17)

20260130 - Changelog page is blank at /changelog on manage.ai.devintensive.com and likely other Expertly apps. Need to implement changelog pages showing release history. The UserMenu links to /changelog but no page/route exists.
20260130 Implemented comprehensive Task & Project enhancements for Expertly Manage per plan (PR #133 merged). Backend: TaskAttachment/TaskComment models, approver fields, API endpoints. Frontend: TaskDetailModal, MarkdownEditor, FileUploadZone, ApproverSelector, Breadcrumbs, ProjectTypeahead, expand/collapse on Projects, queue name resolution on Dashboard, org selector moved to sidebar bottom.
20260130 - Manage backend crashing with ModuleNotFoundError: aiofiles. Added aiofiles to requirements.txt.
20260130 - Sidebar UI improvements across all apps: (a) Centralized organization switcher in UserMenu - clicking username now shows org dropdown, (b) Improved UserMenu visual distinction with stronger borders/shadows, (c) Alphabetized Developer Tools menu, (d) Added Test Scenarios page to admin app and menu link
20260130 Fix Developer Tools submenu positioning (goes down and gets cut off - should go up) + Add System Health link across all Expertly projects
20260130 - Don't auto-generate API key when creating bot; generate on-demand when user requests it
20260130 Fix Projects page multi-level indentation bug - depth calculation was incorrect when projects processed out of order
20260130 - Implement Voice Transcription Widget: A floating microphone button component for @expertly/ui that captures speech via Deepgram and injects transcribed text into the currently-focused input/textarea
20260130 - Fix user menu to keep open on command-click (opens link in new tab). Regular click still closes the menu.
20260131 - Implement selective deployment for monorepo: Added detect-changes job to GitHub Actions workflow that only deploys apps with actual changes. Single app change now deploys in ~20-30s vs ~2min for all 9 apps. Docs-only changes skip deployment entirely. Shared package (packages/ui) or infrastructure changes still deploy all apps.
20260131 - Optimize CI typechecks: Made ci.yml typecheck jobs selective - each job checks if its app changed and skips expensive npm ci/typecheck if not. Also removed redundant typecheck from deploy.yml since CI enforces it before merge. Result: workflow-only changes complete in ~25s instead of ~2min.
20260131 - Expertly Manage sidebar changes: (1) Remove Bots link (Users and Bots already exists), (2) Alphabetize playbooks at each hierarchy level, (3) Add spacer before Teams to visually separate Teams/Users and Bots/Wins section
20260131 17:39 - Add Team Members widget to Expertly Manage dashboard as the top widget. Displays user avatars with names below and titles/roles on hover.
20260131 18:44:34 EST - Continuing multi-org user access implementation: Add organizations endpoint, update auth flow, implement multi-session cookies
20260131 - Add unsaved changes detection/warning to all Manage app screens:
- Created useUnsavedChanges hook for reusable unsaved changes tracking
- Updated Playbooks.tsx: editor, create modal, and group modal
- Updated TaskDetailModal.tsx: uses existing hasChanges tracking
- Updated Queues.tsx: create and edit modals
- Updated Teams.tsx: create and edit modals  
- Updated Projects.tsx: create and edit modals
- Updated RecurringTasks.tsx: create and edit modals
Warns users before losing changes on modal close or page refresh.
20260131 18:59:46 EST - Implementing org membership management APIs and UI, plus Expertly Admin flag management
20260131 - Manage Edit Playbook: Change step header background from gray-50 to primary-50 (theme-aware color) for visual variety and skimmability
20260131 Implement task phase system (workflow phases like Dynamics CRM - planning, ready, in_progress, pending_review, in_review, changes_requested, approved, waiting_on_subplaybook)
20260131 - Improve playbook step editing UX: auto-expand on focus, auto-collapse when moving to next step
20260201 - Set up Violet and Ocean themes in admin panel at https://admin.ai.devintensive.com/themes for cross-project use
20260201 - Implement test scenarios enhancement: database-driven scenario definitions with plain-English step-by-step descriptions and real test result tracking. Created models, schemas, services, API endpoints, migration, seed data, frontend types, API client, and updated TestScenarios.tsx.
20260201 - Added playbook assignment defaults (default_queue_id, default_approver_type, default_approver_id, default_approver_queue_id) to Playbook model and UI, and updated CreateAssignmentModal to use these defaults when selecting a playbook
20260202 - Voice transcription not working in Manage - Fix encoding mismatch between frontend (WebM/Opus) and backend Deepgram config (linear16)
20260202 - Migrated Today, Vibetest, Salon, Develop apps to use Identity service for all user management. Created PR #263.
20260202 - Upgrade Deepgram model from nova-2 to nova-3 for better transcription accuracy (54% lower WER)
20260202 - Add playbook_generation use case to AI config for Manage app's AI Assist feature
20260202 - Add Groq support to Manage AI service for playbook generation
20260202 08:12:16 - Eliminate local users/tenants collections from Develop app - changed tenant_id to organization_id, removed shadow user creation, updated all API endpoints and services to use Identity service directly
20260202: Fixed identity avatar images lost during blue-green deployments. Made identity_uploads volume external and shared. Created shared_identity_uploads volume on server and migrated all avatars from blue/green volumes.
20260202 Continue Manage app migration to eliminate local User collection - update notifications, task_comments, notification_service, and seed to use Identity service
